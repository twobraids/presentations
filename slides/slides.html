<div>
	<h2 style="text-align:center">Configman</h2>
	<div  style="text-align:center">
		This presentation is best viewed in<br>
		Full Screen mode<br>
		(F11 in Firefox)<br><br>
		Use the Right and Left Arrow keys to move through the presentation.
	</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h1 style="text-align:left; margin-left:5%">Configman</h1>
	</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h1 style="text-align:left; margin-left:5%">Configman</h1>
	<h2 style="text-align:left; margin-left:5%">the grand unified<br>configuration theorem</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h1 style="text-align:left; margin-left:5%">Lars</h1>
</div>
<hr><!-- ------------------------------------------------------------------------------------------- -->

<div>
	<h1 style="text-align:left; margin-left:5%">Lars</h1>
	<p style="text-align:left; margin-left:5%"><br>the Mozilla Web Engineering <br>Herd Patriarch</p>
<hr><!-- ------------------------------------------------------------------------------------------- -->
<div style="-moz-transition: opacity 1ms ease;">
        <img style="position: fixed; right: 200px; top: 100px; height: 600px" src="resources/larsalope.jpg">
	<h1 style="text-align:left; margin-left:5%">Lars</h1>
	<p style="text-align:left; margin-left:5%"><br>the Mozilla Web Engineering <br>Herd Patriarch</p>
</div>
<hr><!-- ------------------------------------------------------------------------------------------- -->
<div style="-moz-transition: opacity 1ms ease;">
        <img style="position: fixed; right: 200px; top: 100px; height: 600px" src="resources/larsalope.jpg">
	<h1 style="text-align:left; margin-left:5%">Lars</h1>
	<p style="text-align:left; margin-left:5%"><br>the Mozilla Web Engineering <br>Herd Patriarch</p>
	<p style="text-align:left; margin-left:5%"><br>does not know any<br>
	the cast members of<br>
	Duck Dynasty
	</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<img style="position: fixed; left: 0px; top: 0px; width:100%" src="resources/line3.png">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center"><br>there is no problem<br> that cannot be solved by <br>another layer of indirection.</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Getting Config into a Program</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Getting Config into a Program</h2>
	<h2 style="text-align:center;color:orange">command line arguments</h2>
	<div style="position: absolute;left:40%;top:200px;color:orange;font-size:200%">getopt</div>
	<div style="position: absolute;left:60%;top:400px;color:orange;font-size:150%">optparse</div>
	<div style="position: absolute;left:45%;top:600px;color:orange;font-size:175%">argparse</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Getting Config into a Program</h2>
	<h2 style="text-align:center;color:#00FF00">config files</h2>
	<div style="position: absolute;left:40%;top:200px;color:orange;font-size:200%">getopt</div>
	<div style="position: absolute;left:60%;top:400px;color:orange;font-size:150%">optparse</div>
	<div style="position: absolute;left:45%;top:600px;color:orange;font-size:175%">argparse</div>
	<div style="position: absolute;left:33%;top:410px;color:#00FF00;font-size:160%">ConfigParser</div>
	<div style="position: absolute;left:62%;top:575px;color:#00FF00;font-size:200%">ConfigObj</div>
	<div style="position: absolute;left:50%;top:500px;color:#00FF00;font-size:75%">cfgparse</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Getting Config into a Program</h2>
	<h2 style="text-align:center;color:cyan">json files</h2>
	<div style="position: absolute;left:40%;top:200px;color:orange;font-size:200%">getopt</div>
	<div style="position: absolute;left:60%;top:400px;color:orange;font-size:150%">optparse</div>
	<div style="position: absolute;left:45%;top:600px;color:orange;font-size:175%">argparse</div>
	<div style="position: absolute;left:33%;top:410px;color:#00FF00;font-size:160%">ConfigParser</div>
	<div style="position: absolute;left:62%;top:575px;color:#00FF00;font-size:200%">ConfigObj</div>
	<div style="position: absolute;left:50%;top:500px;color:#00FF00;font-size:75%">cfgparse</div>
	<div style="position: absolute;left:60%;top:190px;color:cyan;font-size:130%">json</div>
	<div style="position: absolute;left:55%;top:275px;color:cyan;font-size:100%">simplejson</div>
	<div style="position: absolute;left:61%;top:650px;color:cyan;font-size:120%">ultrajson</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Getting Config into a Program</h2>
	<h2 style="text-align:center;color:red">python modules</h2>
	<div style="position: absolute;left:40%;top:200px;color:orange;font-size:200%">getopt</div>
	<div style="position: absolute;left:60%;top:400px;color:orange;font-size:150%">optparse</div>
	<div style="position: absolute;left:45%;top:600px;color:orange;font-size:175%">argparse</div>
	<div style="position: absolute;left:33%;top:410px;color:#00FF00;font-size:160%">ConfigParser</div>
	<div style="position: absolute;left:62%;top:575px;color:#00FF00;font-size:200%">ConfigObj</div>
	<div style="position: absolute;left:50%;top:500px;color:#00FF00;font-size:75%">cfgparse</div>
	<div style="position: absolute;left:60%;top:190px;color:cyan;font-size:130%">json</div>
	<div style="position: absolute;left:55%;top:275px;color:cyan;font-size:100%">simplejson</div>
	<div style="position: absolute;left:61%;top:650px;color:cyan;font-size:120%">ultrajson</div>
	<div style="position: absolute;left:47%;top:310px;color:red;font-size:220%">local.py</div>
	<div style="position: absolute;left:37%;top:590px;color:red;font-size:90%">modules</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Getting Config into a Program</h2>
	<h2 style="text-align:center;color:yellow">too many to enumerate</h2>
	<div style="position: absolute;left:40%;top:200px;color:orange;font-size:200%">getopt</div>
	<div style="position: absolute;left:60%;top:400px;color:orange;font-size:150%">optparse</div>
	<div style="position: absolute;left:45%;top:600px;color:orange;font-size:175%">argparse</div>
	<div style="position: absolute;left:33%;top:410px;color:#00FF00;font-size:160%">ConfigParser</div>
	<div style="position: absolute;left:62%;top:575px;color:#00FF00;font-size:200%">ConfigObj</div>
	<div style="position: absolute;left:50%;top:500px;color:#00FF00;font-size:75%">cfgparse</div>
	<div style="position: absolute;left:60%;top:190px;color:cyan;font-size:130%">json</div>
	<div style="position: absolute;left:55%;top:275px;color:cyan;font-size:100%">simplejson</div>
	<div style="position: absolute;left:61%;top:650px;color:cyan;font-size:120%">ultrajson</div>
	<div style="position: absolute;left:47%;top:310px;color:red;font-size:220%">local.py</div>
	<div style="position: absolute;left:37%;top:590px;color:red;font-size:90%">modules</div>
	<div style="position: absolute;left:44%;top:250px;color:yellow;font-size:180%">XML</div>
	<div style="position: absolute;left:39%;top:468px;color:yellow;font-size:200%">YAML</div>
	<div style="position: absolute;left:58%;top:440px;color:yellow;font-size:110%">os.environ</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center"><br>They all eventually boil down<br>
	to the same thing:</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center"><br>They all eventually boil down<br>
	to the same thing:</h2>
	<h2 style="text-align:center;color:#FFFF00;"><br>Key / Value Mapping</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center;color:orange;"><br><br>What if they all had<br>
	a compatible API?</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">A Digression...</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 class="text_centered">&nbsp;</h2>
	<img style="display:block; margin-left: auto; margin-right: auto; width:85%" src="resources/lego1.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 class="text_centered">&nbsp;</h2>
	<img style="display:block; margin-left: auto; margin-right: auto; width:85%" src="resources/lego2.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 class="text_centered">&nbsp;</h2>
	<img style="display:block; margin-left: auto; margin-right: auto; width:85%" src="resources/lego3.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 class="text_centered">&nbsp;</h2>
	<img style="display:block; margin-left: auto; margin-right: auto; width:85%" src="resources/lego4.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 class="text_centered">&nbsp;</h2>
	<img style="display:block; margin-left: auto; margin-right: auto; width:85%" src="resources/lego5.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 class="text_centered">defaults</h2>
	<img style="display:block; margin-left: auto; margin-right: auto;  width:85%" src="resources/lego.pile-1.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 class="text_centered" style="color:cyan">application defaults</h2>
	<img style="display:block; margin-left: auto; margin-right: auto; width:75%" src="resources/lego.pile-2.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 class="text_centered" style="color:lime">configuration file</h2>
	<img style="display:block; margin-left: auto; margin-right: auto; width:75%" src="resources/lego.pile-3.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 class="text_centered" style="color:yellow">environment</h2>
	<img style="display:block; margin-left: auto; margin-right: auto; width:75%" src="resources/lego.pile-4.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 class="text_centered" style="color:orange">command line</h2>
	<img style="display:block; margin-left: auto; margin-right: auto; width:75%" src="resources/lego.pile-5.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 class="text_centered">&nbsp;</h2>
	<img style="display:block; margin-left: auto; margin-right: auto;   width:85%" src="resources/lego6.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h1 style="text-align:center"><br>Configman</h1>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center;color:yellow"><br><br>Basic Use</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div class="block_centered">
<pre class="three_quarter_size_text">
defaults = {
    "hostname": "localhost",
    "port": 5432,
    "dbname": "my_db",
    "user": "lars",
    "password": 'secrets',
}
</pre>
<pre class="three_quarter_size_text">
from configman import configuration
config = configuration(defaults)
</pre>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div class="block_centered">
<pre class="three_quarter_size_text">
defaults = {
    "hostname": "localhost",
    "port": 5432,
    "dbname": "my_db",
    "user": "lars",
    "password": 'secrets',
}
</pre>
<pre class="three_quarter_size_text grayout">
from configman import configuration
config = configuration(defaults)
</pre>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div class="block_centered">
<pre class="three_quarter_size_text grayout">
defaults = {
    "hostname": "localhost",
    "port": 5432,
    "dbname": "my_db",
    "user": "lars",
    "password": 'secrets',
}
</pre>
<pre class="three_quarter_size_text" style="color:cyan">
from configman import configuration
config = configuration(defaults)
</pre>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="three_quarter_size_text">
$ python o1.py --help
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="halfsize_text">
usage:  [-h] [--password PASSWORD] [--user USER] [--hostname HOSTNAME]
        [--port PORT] [--dbname DBNAME] [--admin.print_conf ADMIN.PRINT_CONF]
        [--admin.dump_conf ADMIN.DUMP_CONF] [--admin.strict]
        [--admin.conf ADMIN.CONF]

optional arguments:
  -h, --help            show this help message and exit
</pre><pre class="halfsize_text">
  --hostname HOSTNAME   hostname
  --port PORT           port
  --dbname DBNAME       dbname
  --user USER           user
  --password PASSWORD   password
</pre><pre class="halfsize_text">
  --admin.print_conf ADMIN.PRINT_CONF
                        write current config to stdout (json, py, ini, conf)
  --admin.dump_conf ADMIN.DUMP_CONF
                        a file system pathname for new config file (types:
                        json, py, ini, conf)
  --admin.strict        mismatched options generate exceptions rather than
                        just warnings
  --admin.conf ADMIN.CONF
                        the pathname of the config file (path/filename)
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="halfsize_text grayout">
usage:  [-h] [--password PASSWORD] [--user USER] [--hostname HOSTNAME]
        [--port PORT] [--dbname DBNAME] [--admin.print_conf ADMIN.PRINT_CONF]
        [--admin.dump_conf ADMIN.DUMP_CONF] [--admin.strict]
        [--admin.conf ADMIN.CONF]

optional arguments:
  -h, --help            show this help message and exit
</pre><pre class="halfsize_text">
  --hostname HOSTNAME   hostname
  --port PORT           port
  --dbname DBNAME       dbname
  --user USER           user
  --password PASSWORD   password
</pre><pre class="halfsize_text grayout">
  --admin.print_conf ADMIN.PRINT_CONF
                        write current config to stdout (json, py, ini, conf)
  --admin.dump_conf ADMIN.DUMP_CONF
                        a file system pathname for new config file (types:
                        json, py, ini, conf)
  --admin.strict        mismatched options generate exceptions rather than
                        just warnings
  --admin.conf ADMIN.CONF
                        the pathname of the config file (path/filename)
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div class="three_quarter_size_text">
<tt>$ </tt><tt style="color:yellow">export hostname=twobraids.com</tt><br>
<tt>$ </tt><tt style="color:yellow">export user=ethel</tt><br>
<tt>$</tt>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div class="three_quarter_size_text">
<tt>$ </tt><tt style="color:yellow">export hostname=twobraids.com</tt><br>
<tt>$ </tt><tt style="color:yellow">export user=ethel</tt><br>
<tt>$ python o1.py </tt><tt style="color:orange">--dbname=fred --user=wilma</tt><tt> --admin.dump_conf=o1.ini</tt><br>
<tt>$</tt>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div class="three_quarter_size_text">
<tt>$ </tt><tt style="color:yellow">export hostname=twobraids.com</tt><br>
<tt>$ </tt><tt style="color:yellow">export user=ethel</tt><br>
<tt>$ python o1.py </tt><tt style="color:orange">--dbname=fred --user=wilma</tt><tt> --admin.dump_conf=o1.ini</tt><br>
<tt>$</tt>
</div>
	<img style="display:block; margin-left: auto; margin-right: auto; width:100%" src="resources/configman-twobraids-ethel-fred-wilma-01.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div class="three_quarter_size_text">
<tt>$ </tt><tt style="color:yellow">export hostname=twobraids.com</tt><br>
<tt>$ </tt><tt style="color:yellow">export user=ethel</tt><br>
<tt>$ python o1.py </tt><tt style="color:orange">--dbname=fred --user=wilma</tt><tt> --admin.dump_conf=o1.ini</tt><br>
<tt>$ cat o1.ini</tt>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="halfsize_text">
# hostname
#hostname=twobraids.com

# port
#port=5432

# dbname
#dbname=fred

# user
#user=wilma

# password
#password=secrets
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div class="three_quarter_size_text">
<tt>$ </tt><tt style="color:yellow">export hostname=twobraids.com</tt><br>
<tt>$ </tt><tt style="color:yellow">export user=ethel</tt><br>
<tt>$ python o1.py </tt><tt style="color:orange">--dbname=fred --user=wilma</tt><tt> --admin.print_conf=json | json_pp</tt><br>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="three_quarter_size_text">
{
   "hostname" : "twobraids.com",
   "port" : 5432,
   "dbname" : "fred"
   "user" : "wilma",
   "password" : "secrets",
}
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div class="three_quarter_size_text"><br>
<tt>$ python o1.py  </tt><tt style="color:#00FF00">--admin.conf=o1.ini</tt>
</div>
<div>
<img style="display:block; margin-left: auto; margin-right: auto; width:100%" src="resources/configman-o1-ini.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div class="three_quarter_size_text"><br>
<tt>$ python o1.py </tt><tt style="color:#00FF00">--admin.conf=o1.ini </tt><tt style="color:orange">--user=sally --password=Tr0ub4dor</tt>
</div>
<img style="display:block; margin-left: auto; margin-right: auto; width:100%" src="resources/configman-o1-ini-sally.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center;color:#00FF00"><br><br>Nested Namespaces</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="three_quarter_size_text">
default = {
        "storage": {
            "hostname": "localhost",
            "port": 5432,
            "dbname": "my_db",
            "user": "lars",
            "password": 'secrets',
        }
}
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre  class="three_quarter_size_text" style="color:#FFFFFF">
$ python o2.py --help
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="three_quarter_size_text">
usage: ...

optional arguments:
  --storage.password STORAGE.PASSWORD
                        password
  --storage.user STORAGE.USER
                        user
  --storage.hostname STORAGE.HOSTNAME
                        hostname
  --storage.port STORAGE.PORT
                        port
  --storage.dbname STORAGE.NAME
                        dbname
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div class="three_quarter_size_text">
<tt>$ </tt><tt  style="color:yellow">export storage__user=ethel</tt><br>
<tt>$ python o2.py </tt><tt  style="color:orange">--storage.dbname=fred </tt><tt>--admin.dump_conf=o2.ini</tt>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="halfsize_text">
[storage]

    # hostname
    #hostname=localhost

    # name
    #dbname=fred

    # password
    #password=secrets

    # port
    #port=5432

    # user
    #user=ethel
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center;color:orange"><br><br>Dynamic Loading</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="three_quarter_size_text">
class Postgres(object):
    required_config = {
        "hostname": "localhost",
        "port": 5432,
        "name": "my_db",
        "user": "lars",
        "password": 'secrets',
    }
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="three_quarter_size_text">
default = {
        "storage": {
            "storage_class": Postgres
        }
}
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="three_quarter_size_text"">
$ python o3.py --help
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="halfsize_text">
usage: ...

optional arguments:
  --storage.storage_class STORAGE.STORAGE_CLASS
                        storage_class
  --storage.password STORAGE.PASSWORD
                        password
  --storage.user STORAGE.USER
                        user
  --storage.hostname STORAGE.HOSTNAME
                        hostname
  --storage.port STORAGE.PORT
                        port
  --storage.name STORAGE.NAME
                        name
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="three_quarter_size_text">

class MooseBase(object):
    required_config = {
        "hostname": "localhost",
        "url": "http://twobraids.com/",
        "auth_key": "675A8BFF2099",
    }
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div class="three_quarter_size_text">
	<tt>$ python o3.py </tt><tt style="color:orange">--storage.storage_class=MooseBase</tt><tt> --help</tt>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="halfsize_text">
usage: ...

optional arguments:
  --storage.storage_class STORAGE.STORAGE_CLASS
                        storage_class
  --storage.url STORAGE.URL
  --storage.hostname STORAGE.HOSTNAME
  --storage.auth_key STORAGE.AUTH_KEY

</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div style="margin-left:5%">
<tt style="font-size:150%;">
<br>
class&nbsp;BothBase(object):<br>
&nbsp;&nbsp;&nbsp;&nbsp;required_config&nbsp;=&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"primary":&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"storage_class":&nbsp;Postgres,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"secondary":&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"storage_class":&nbsp;MooseBase,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
</tt>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div style="margin-left:5%">
<tt style="font-size:150%;">
<br>
class&nbsp;BothBase(object):<br>
&nbsp;&nbsp;&nbsp;&nbsp;required_config&nbsp;=&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="highlight">primary</span>":&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"storage_class":&nbsp;Postgres,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="highlight">secondary</span>":&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"storage_class":&nbsp;MooseBase,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
</tt>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div style="margin-left:5%">
<tt style="font-size:150%;">
<br>
class&nbsp;BothBase(object):<br>
&nbsp;&nbsp;&nbsp;&nbsp;required_config&nbsp;=&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="highlight">primary</span>":&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="highlight_orange">storage_class</span>":&nbsp;Postgres,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="highlight">secondary</span>":&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="highlight_orange">storage_class</span>":&nbsp;MooseBase,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
</tt>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div class="three_quarter_size_text">
	<tt>$ python o5.py </tt><tt style="color:orange">--storage.storage_class=BothBase</tt><tt> --help</tt>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="halfsize_text">
optional arguments:
  --storage.storage_class STORAGE.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.primary.storage_class STORAGE.PRIMARY.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.primary.password STORAGE.PRIMARY.PASSWORD
  --storage.primary.user STORAGE.PRIMARY.USER
  --storage.primary.hostname STORAGE.PRIMARY.HOSTNAME
  --storage.primary.port STORAGE.PRIMARY.PORT
  --storage.primary.name STORAGE.PRIMARY.NAME
</pre>
<pre class="halfsize_text">
  --storage.secondary.storage_class STORAGE.SECONDARY.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.secondary.url STORAGE.SECONDARY.URL
  --storage.secondary.hostname STORAGE.SECONDARY.HOSTNAME
  --storage.secondary.auth_key STORAGE.SECONDARY.AUTH_KEY
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="halfsize_text">
optional arguments:
  --storage.storage_class STORAGE.STORAGE_CLASS
</pre>
<pre class="halfsize_text highlight">
  --storage.primary.storage_class STORAGE.PRIMARY.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.primary.password STORAGE.PRIMARY.PASSWORD
  --storage.primary.user STORAGE.PRIMARY.USER
  --storage.primary.hostname STORAGE.PRIMARY.HOSTNAME
  --storage.primary.port STORAGE.PRIMARY.PORT
  --storage.primary.name STORAGE.PRIMARY.NAME
</pre>
<pre class="halfsize_text">
  --storage.secondary.storage_class STORAGE.SECONDARY.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.secondary.url STORAGE.SECONDARY.URL
  --storage.secondary.hostname STORAGE.SECONDARY.HOSTNAME
  --storage.secondary.auth_key STORAGE.SECONDARY.AUTH_KEY
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="halfsize_text">
optional arguments:
  --storage.storage_class STORAGE.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.primary.storage_class STORAGE.PRIMARY.STORAGE_CLASS
</pre>
<pre class="halfsize_text highlight">
  --storage.primary.password STORAGE.PRIMARY.PASSWORD
  --storage.primary.user STORAGE.PRIMARY.USER
  --storage.primary.hostname STORAGE.PRIMARY.HOSTNAME
  --storage.primary.port STORAGE.PRIMARY.PORT
  --storage.primary.name STORAGE.PRIMARY.NAME
</pre>
<pre class="halfsize_text">
  --storage.secondary.storage_class STORAGE.SECONDARY.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.secondary.url STORAGE.SECONDARY.URL
  --storage.secondary.hostname STORAGE.SECONDARY.HOSTNAME
  --storage.secondary.auth_key STORAGE.SECONDARY.AUTH_KEY
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="halfsize_text">
optional arguments:
  --storage.storage_class STORAGE.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.primary.storage_class STORAGE.PRIMARY.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.primary.password STORAGE.PRIMARY.PASSWORD
  --storage.primary.user STORAGE.PRIMARY.USER
  --storage.primary.hostname STORAGE.PRIMARY.HOSTNAME
  --storage.primary.port STORAGE.PRIMARY.PORT
  --storage.primary.name STORAGE.PRIMARY.NAME
</pre>
<pre  class="halfsize_text highlight">
  --storage.secondary.storage_class STORAGE.SECONDARY.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.secondary.url STORAGE.SECONDARY.URL
  --storage.secondary.hostname STORAGE.SECONDARY.HOSTNAME
  --storage.secondary.auth_key STORAGE.SECONDARY.AUTH_KEY
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="halfsize_text">
optional arguments:
  --storage.storage_class STORAGE.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.primary.storage_class STORAGE.PRIMARY.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.primary.password STORAGE.PRIMARY.PASSWORD
  --storage.primary.user STORAGE.PRIMARY.USER
  --storage.primary.hostname STORAGE.PRIMARY.HOSTNAME
  --storage.primary.port STORAGE.PRIMARY.PORT
  --storage.primary.name STORAGE.PRIMARY.NAME
</pre>
<pre class="halfsize_text">
  --storage.secondary.storage_class STORAGE.SECONDARY.STORAGE_CLASS
</pre>
<pre class="halfsize_text highlight">
  --storage.secondary.url STORAGE.SECONDARY.URL
  --storage.secondary.hostname STORAGE.SECONDARY.HOSTNAME
  --storage.secondary.auth_key STORAGE.SECONDARY.AUTH_KEY
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div class="three_quarter_size_text">
<tt>$ </tt><tt style="color:yellow">export storage__storage_class=BothBase</tt><br>
<tt>$ python o5.py </tt><tt style="color:orange">--storage.secondary.storage_class=Postgres</tt><tt> --help</tt>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="halfsize_text">
optional arguments:
  --storage.storage_class STORAGE.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.primary.storage_class STORAGE.PRIMARY.STORAGE_CLASS
</pre>
<pre class="halfsize_text">
  --storage.primary.password STORAGE.PRIMARY.PASSWORD
  --storage.primary.user STORAGE.PRIMARY.USER
  --storage.primary.hostname STORAGE.PRIMARY.HOSTNAME
  --storage.primary.port STORAGE.PRIMARY.PORT
  --storage.primary.name STORAGE.PRIMARY.NAME
</pre>
<pre class="halfsize_text">
  --storage.secondary.storage_class STORAGE.SECONDARY.STORAGE_CLASS
</pre>
<pre class="halfsize_text highlight">
  --storage.secondary.password STORAGE.PRIMARY.PASSWORD
  --storage.secondary.user STORAGE.PRIMARY.USER
  --storage.secondary.hostname STORAGE.PRIMARY.HOSTNAME
  --storage.secondary.port STORAGE.PRIMARY.PORT
  --storage.secondary.name STORAGE.PRIMARY.NAME
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<img style="display:block; margin-left: auto; margin-right: auto; width:85%" src="resources/lego.maze1.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<img style="display:block; margin-left: auto; margin-right: auto; width:85%" src="resources/lego.maze2.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<img style="display:block; margin-left: auto; margin-right: auto; width:85%" src="resources/lego.maze3.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<img style="display:block; margin-left: auto; margin-right: auto; width:85%" src="resources/lego.maze4.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<img style="display:block; margin-left: auto; margin-right: auto; width:85%" src="resources/lego.maze5.jpg">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<img style="position: fixed; left: 0px; top: 0px; width:100%" src="resources/line3.png">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center;color:cyan"><br><br>More Control</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div class="block_centered">
<pre class="halfsize_text">

required_config = configman.Namespace()
required_config.add_option(
    name="storage_class",
    doc="a qualified classname for a storage class",
    default="postgres",
    from_string_converter=configman.converters.class_converter,
)
</pre>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Option Options</h2>
<div class="block_centered">
<pre class="halfsize_text">
        default
        doc
        from_string_converter
        to_string_converter
        short_form
        exclude_from_print_conf
        exclude_from_dump_conf
        is_argument
        likely_to_be_changed
        not_for_definition
        reference_value_from
</pre>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h1 style="text-align:center">Configman</h1>
	<p class="larger_size_text" style="text-align:center"><br>Anything for which</p>
	<p class="larger_size_text" style="text-align:center;color:yellow"><br><tt>isinstance(a_thing. collections.Mapping) == True</tt></p>
	<p class="larger_size_text" style="text-align:center"><br>can be used as a source of<br>configuration requirements</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h1 style="text-align:center">Configman</h1>
	<p class="larger_size_text" style="text-align:center"><br>Anything for which</p>
	<p class="larger_size_text" style="text-align:center;color:yellow"><br><tt>isinstance(a_thing. collections.Mapping) == True</tt></p>
	<p class="larger_size_text" style="text-align:center"><br>can be used as a source of<br>configuration value overlays</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="three_quarter_size_text">
from configman import configuration

config = configuration(
    definition_source=defaults,
</pre><pre class="three_quarter_size_text">
    values_source_list=[
        os.environ,
        {'host': 'localhost'},
        an_imported_module,
        some_class_instance.__dict__,
        commandline,
    ]
</pre><pre class="three_quarter_size_text">
)
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<pre class="three_quarter_size_text grayout">
from configman import configuration

config = configuration(
    definition_source=defaults,
</pre><pre class="three_quarter_size_text">
    values_source_list=[
        os.environ,
        {'host': 'localhost'},
        an_imported_module,
        some_class_instance.__dict__,
        commandline,
    ]
</pre><pre class="three_quarter_size_text grayout">
)
</pre>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">the configuration object</h2>
	<div class="three_quarter_size_text">
<tt>defaults = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;"hostname": "localhost",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"port": 5432,<br>
&nbsp;&nbsp;&nbsp;&nbsp;"dbname": "my_db",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"user": "lars",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"password": 'secrets',<br>
}<br>
</tt>
<tt>
from configman import configuration<br></tt>
<tt>config</tt><tt> = configuration(defaults)<br></tt>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">the configuration object</h2>
	<div class="three_quarter_size_text">
<tt  style="color:#333333">defaults = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;"hostname": "localhost",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"port": 5432,<br>
&nbsp;&nbsp;&nbsp;&nbsp;"dbname": "my_db",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"user": "lars",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"password": 'secrets',<br>
}<br>
</tt>
<tt  style="color:#333333">
from configman import configuration<br></tt>
<tt style="color:yellow">config</tt><tt style="color:#333333"> = configuration(defaults)<br></tt>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">the configuration object</h2>
	<p class="larger_size_text" style="text-align:center"><br><tt>isinstance(</tt><tt style="color:yellow">config</tt><tt>, collections.Mapping) == True</tt></p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">the configuration object</h2>
	<p class="larger_size_text" style="text-align:center"><br><tt>isinstance(</tt><tt style="color:yellow">config</tt><tt>, collections.Mapping) == True</tt></p>
	<p class="larger_size_text" style="text-align:center"><br>with the dot operator overloaded</p>
	<p class="larger_size_text" style="text-align:center"><br>
	<tt>
	print config.storage_class<br>
	print config.primary.host<br>
	print config.secondary.url
	</tt></p>

</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h1 style="text-align:center">Configman</h1>
	<p class="larger_size_text" style="text-align:center"><br>Great,<br>you've got all this<br>flexibility,<br>what use is it?</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h1 style="text-align:center">Socorro</h1>
	<h2 style="text-align:center">the Firefox Crash Reporter</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<div style="background:gray;border:10px solid white;margin-left: auto;margin-right: auto;">
	<embed  style="margin-left: auto; margin-right: auto;" src="resources/socorro.layout.2014.all.animations.svg" type="image/svg+xml" width="100%">
	</embed
	</div>
</div>
<hr><!-- ------------------------------------------------------------------------------------------- -->
<div>
	<h2 style="text-align:center">Three Part Design</h2>
	<img style="display:block; margin-left: auto; margin-right: auto; width:50%" src="resources/socorro.fts.png">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
<div class="block_centered" style="width:50%">
<pre class="three_quarter_size_text">


fetch_transform_save = {
    fetch_storage_class: ...,
    transformation_class: ...,
    save_storage_class: ...,
    producer_consumer_class: ...,
}
</pre>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Socorro Processor</h2>
	<img style="display:block; margin-left: auto; margin-right: auto; width:80%" src="resources/socorro.processor.png">
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Socorro Processor</h2>
<div class="block_centered" style="width:70%">
<pre class="halfsize_text">


fetch_transform_save = {
    fetch_storage_class: HBase
    transformation_class: HybridProcessor2012; Breakpad Stackwalker,
    save_storage_class: HBase; ElasticSearch; Postgres,
    producer_consumer_class: Multithreaded; RabbitMQ
}
</pre>
</div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Socorro is...</h2>
	<p class="larger_size_text" style="text-align:center"><br>a collection of<br>cooperating classes</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Socorro is...</h2>
	<p class="larger_size_text" style="text-align:center"><br> set of<br>well defined and consistent<br>Business Logic APIs</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Socorro is...<br><br></h2>
	<img style="float:right;width:50%" src="resources/socorro.behind.the.scenes.jpg">
	<p class="larger_size_text" style="text-align:center"><br><br><br>loosely glued together<br>with frameworks based on<br>Configman</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Configman Benefits</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Configman Benefits</h2>
	<p class="larger_size_text" style="text-align:center;color:#FFFF00;font-size:150%"><br>agility</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Configman Benefits</h2>
	<p class="larger_size_text" style="text-align:center;color:#FFFF00;font-size:150%"><br>agility</p>
	<p class="larger_size_text" style="text-align:center">new components can be developed and deployed rapidly</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Configman Benefits</h2>
	<p class="larger_size_text" style="text-align:center;color:#FFFF00;font-size:150%"><br>continuous deployment</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Configman Benefits</h2>
	<p class="larger_size_text" style="text-align:center;color:#FFFF00;font-size:150%"><br>continuous deployment</p>
	<p class="larger_size_text" style="text-align:center">dead simple to feature flag<br>
	new or experimental features</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Configman Benefits</h2>
	<p class="larger_size_text" style="text-align:center;color:#FFFF00;font-size:150%"><br>integrates into IT culture</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Configman Benefits</h2>
	<p class="larger_size_text" style="text-align:center;color:#FFFF00;font-size:150%"><br>integrates into IT culture</p>
	<p class="larger_size_text" style="text-align:center">use whatever<br>Key/Value store<br>is locally fashionable</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Configman Downsides</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Configman Downsides</h2>
	<p class="larger_size_text" style="text-align:center"><br>moves complexity from code<br>into the configuration</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Configman Downsides</h2>
	<p class="larger_size_text" style="text-align:center"><br>causes a<br>combinitorial explosion<br>in arrangement of<br>components</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Configman Downsides</h2>
	<p class="larger_size_text" style="text-align:center"><br>integration testing becomes</p>
	<p class="larger_size_text" style="text-align:center;color:orange;"><br>CRITICAL</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Configman Downsides</h2>
	<p class="larger_size_text" style="text-align:center"><br>takes time to understand</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center">Configman Downsides</h2>
	<p class="larger_size_text" style="text-align:center"><br>written by an old insane man<br>
	that hates writing documentation<br>
	and rails against coding style standards
	</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h1 style="text-align:center">Configman</h1>
	<p class="larger_size_text" style="text-align:center;color:green;font-size:150%"><br><tt>sudo pip install configman</tt></p>
	<p class="larger_size_text" style="text-align:center;"><br>gets the production release used in Socorro</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h1 style="text-align:center">Configman</h1>
	<p class="larger_size_text" style="text-align:center;color:green"><br><tt>git clone git@github.com:twobraids/configman.git configman</tt></p>
	<p class="larger_size_text" style="text-align:center;color:green"><tt>git fetch origin bleeding-edge:bleeding-edge</tt></p>
	<p class="larger_size_text" style="text-align:center;color:green"><tt>git checkout bleeding-edge</tt></p>
	<p class="larger_size_text" style="text-align:center;"><br>gets the really fun stuff</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h1 style="text-align:center">Configman</h1>
	<p class="larger_size_text" style="text-align:center;"><br><br>Questions & Comments</p>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center"><br>This Presentation</h2>
	<div style="text-align:center">
		<ul>
			<li>entirely in Firefox</li>
			<li>HTML 5</li>
			<li>CSS</li>
			<li>JavaScript</li>
		</ul>
	</div>
	</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
	<h2 style="text-align:center"><br>K Lars Lohn</h2>
	<div style="text-align:center">
		<ul>
			<li>lars@mozilla.com</li>
			<li>twitter: 2braids</li>
			<li>blog: twobraids.com</li>
		</ul>
	</div>
	</h2>
</div>
<hr><!---------------------------------------------------------------------------------------------->
<div>
</div>
<hr><!---------------------------------------------------------------------------------------------->
